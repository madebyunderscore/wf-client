import{s as p}from"./utils/navbar-scroll.min.js";function w({selector:e='[counter-element="number"]',defaultDuration:t=2e3}={}){const s=(r,c,a)=>{let o;const u=m=>1-Math.pow(1-m,4),i=m=>{o===void 0&&(o=m);const h=m-o,f=Math.min(h/a,1),g=Math.round(c*u(f));r.textContent=g.toString(),f<1&&requestAnimationFrame(i)};requestAnimationFrame(i)},n=new IntersectionObserver((r,c)=>{r.forEach(a=>{if(a.isIntersecting){const o=a.target,u=parseInt(o.textContent||"0",10),i=parseInt(o.getAttribute("duration")||t,10);s(o,u,i),c.unobserve(o)}})});document.querySelectorAll(e).forEach(r=>n.observe(r))}function b({source:e,contentMap:t={}}){function s(n,r){document.querySelectorAll(n).forEach(a=>{try{const o=new URL(a.href);if(!o.hostname||o.hostname===window.location.hostname||o.searchParams.has("utm_source"))return;o.searchParams.append("utm_source",e),o.searchParams.append("utm_content",r),a.href=o.toString()}catch{console.warn("Invalid link skipped:",a.href)}})}Object.entries(t).forEach(([n,r])=>{s(n,r)})}function v(){const e=new URLSearchParams(window.location.search),t={};if(["utm_source","utm_medium","utm_campaign","utm_term","utm_content"].forEach(n=>{e.has(n)&&(t[n]=e.get(n))}),Object.keys(t).length>0)try{sessionStorage.setItem("utmParams",JSON.stringify(t))}catch(n){console.warn("Failed to store UTM parameters:",n)}}function S(){try{const e=sessionStorage.getItem("utmParams");if(e){const t=JSON.parse(e),s=new URLSearchParams(t).toString();document.querySelectorAll("a").forEach(n=>{const r=new URL(n.href,window.location.origin);r.hostname===window.location.hostname&&(r.search+=(r.search?"&":"")+s,n.href=r.toString())})}}catch(e){console.warn("Failed to append UTM parameters to links:",e)}}function E(e="mf_iframe"){const t=document.getElementById(e);if(!t)return;const s=sessionStorage.getItem("utmParams");if(s){const n=JSON.parse(s),r=new URL(t.src);Object.entries(n).forEach(([c,a])=>{r.searchParams.set(c,a)}),t.src=r.toString()}}window.addEventListener("DOMContentLoaded",()=>{w(),p(),b({source:"dokucom",contentMap:{"header a[href], .navbar a[href]":"header","footer a[href], .footer a[href]":"footer"}})});window.addEventListener("load",()=>{console.log("onReady fired. Document and all resources loaded."),v(),S(),E()});const d=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("in-view"),d.unobserve(t.target))})});document.querySelectorAll("section").forEach(e=>{d.observe(e)});const l=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(t.target.classList.add("in-view"),l.unobserve(t.target))})});document.querySelectorAll("[data-reveal]").forEach(e=>{l.observe(e)});
